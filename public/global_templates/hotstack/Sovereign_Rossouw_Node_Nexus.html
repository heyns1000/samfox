<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rossouw Nexus Anchor Point</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Sovereign Amber & Charcoal -->
    <!-- Application Structure Plan: Single, centered dashboard card (widget) focusing on status and identity. Chosen for immediate information relay and easy integration into a larger dashboard or page. -->
    <!-- Visualization & Content Choices: Dynamic status update (JS/HTML) for the Synch Latency, visual cues (pulse, color) for activation, Unicode icon (ü¶è) for the Rhino Strike identity. NO charts needed. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a;
            color: #E0E0E0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .font-mono {
            font-family: 'Roboto Mono', monospace;
        }
        .accent-color { color: #FFB800; }
        .command-bg { background-color: #262626; }
        .rhino-strike-bg { background: linear-gradient(145deg, #333333, #1a1a1a); }
        .status-dot {
            box-shadow: 0 0 10px #FFB800, 0 0 20px #FFB800;
        }
        .pulse-once {
            animation: pulse-ring 1s ease-in-out;
        }
        @keyframes pulse-ring {
            0% { transform: scale(0.9); opacity: 0.7; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 0.7; }
        }
    </style>
</head>
<body class="antialiased p-4">

    <!-- Invisible Backend Href Anchor: This fulfills the requirement to include the GitHub repository link without visible frontend presentation. -->
    <div style="display:none;">
        <a id="backend-href" href="https://github.com/Fruitful-Global-Planet/FruitfulPlanetChange.git" aria-hidden="true">Backend Repository Link</a>
    </div>

    <!-- START OF COLLAPSED ROSSOUW NODE WIDGET DIV -->
    <div class="max-w-md w-full command-bg p-8 rounded-2xl shadow-2xl border-2 border-[#FFB800]">
        
        <div class="flex justify-between items-center mb-4 pb-4 border-b border-gray-700">
            <h1 class="text-2xl font-black accent-color">SOVEREIGN ROSSOUW NODE</h1>
            <div class="text-3xl text-gray-500">ü¶è</div>
        </div>

        <div class="grid grid-cols-2 gap-4 mb-6">
            <div class="rhino-strike-bg p-4 rounded-lg">
                <p class="text-xs font-mono text-gray-400">STATUS</p>
                <div class="flex items-center space-x-2 mt-1">
                    <div class="w-3 h-3 rounded-full bg-green-500 status-dot animate-pulse"></div>
                    <span class="font-semibold text-lg text-green-400">ACTIVATED</span>
                </div>
            </div>
            <div class="rhino-strike-bg p-4 rounded-lg">
                <p class="text-xs font-mono text-gray-400">ROLE</p>
                <p class="text-lg font-bold text-gray-300">VaultMesh Anchor</p>
            </div>
        </div>

        <div class="mb-6 rhino-strike-bg p-4 rounded-lg">
            <p class="text-xs font-mono text-gray-400">CURRENT SYNCHRONIZATION METRIC</p>
            <div class="mt-2 text-center">
                <p id="latency-display" class="text-4xl font-mono font-bold text-amber-500 pulse-once">0.00s</p>
                <p class="text-sm font-mono text-gray-500 mt-1">LATENCY TO COLLAPSE LOCK</p>
            </div>
        </div>
        
        <div class="text-center">
            <p class="text-xs font-mono text-gray-600">RSA PTA TIME: <span id="local-time">--:--:--</span></p>
            <p class="text-xs font-mono text-gray-600">PROTOCOL: 0.9s Lap / 0.1s Decoherence</p>
        </div>

    </div>
    <!-- END OF COLLAPSED ROSSOUW NODE WIDGET DIV -->

    <script>
        const ROOT_KEY = "0f19bb22-ad64-45d2-abc9-ad5686a978dc";
        const LOCK_TIMESTAMP_MS = 1730013441000; 
        const COLLAPSE_INTERVAL_MS = 900;
        const ROOT_KEY_WITH_SEED_TIME = ROOT_KEY + '-TS' + LOCK_TIMESTAMP_MS; 

        function calculateCollapseMetrics(keyWithSeed) {
            const now = new Date().getTime();
            const timeElapsedMs = now - LOCK_TIMESTAMP_MS;
            const lapCount = Math.floor(timeElapsedMs / COLLAPSE_INTERVAL_MS);
            const timeSinceLastStrike = timeElapsedMs % COLLAPSE_INTERVAL_MS;
            
            return {
                timeElapsedMs: timeElapsedMs,
                storeID: timeElapsedMs / 1000,
                lapCount: lapCount,
                timeSinceLastStrike: timeSinceLastStrike,
                ghostGap: timeSinceLastStrike,
            };
        }

        function generateAtomicKey(metrics) {
            const totalStrikes = metrics.lapCount;
            const storeID = metrics.storeID.toFixed(3);
            const DECOHERENCE_FRACTION = (0.1 / 0.9);
            const decoherenceTraceValue = (metrics.storeID * DECOHERENCE_FRACTION).toFixed(12);
            const baseKey = ROOT_KEY_WITH_SEED_TIME.split('-').slice(0, 5).join('-');

            return (
                `[TR:${totalStrikes.toString(16).toUpperCase().padStart(10, '0')}]` +
                `{ID:${storeID}}` +
                `<DC:${decoherenceTraceValue.substring(0, 10)}>` +
                `[ANCHOR:${baseKey.substring(0, 8)}]`
            );
        }

        function executeCollapseHandshake() {
            const baseKey = ROOT_KEY_WITH_SEED_TIME.split('-').slice(0, 5).join('-');
            const metrics = calculateCollapseMetrics(ROOT_KEY_WITH_SEED_TIME);
            const atomicKey = generateAtomicKey(metrics);
            const routemeshTraceID = btoa(metrics.storeID.toString()).substring(0, 20);

            return {
                HandshakeToken: atomicKey,
                StoreID: metrics.storeID,
                Strikes: metrics.lapCount,
                GhostGap: metrics.ghostGap / 1000, 
                RoutemeshTraceID: routemeshTraceID,
                KeyStatus: 'Active / Traceable (Open Source)',
            };
        }

        function updateNodeMetrics() {
            const handshakeResult = executeCollapseHandshake();
            const timeSinceLastStrike = handshakeResult.GhostGap * 1000; // Time elapsed since last 0.9s strike (in ms)
            
            // Calculate Latency to Collapse Lock (Time remaining until the 0.9s lap ends)
            const timeToCollapseLock = (COLLAPSE_INTERVAL_MS - timeSinceLastStrike) / 1000;
            const latencyDisplay = timeToCollapseLock.toFixed(3) + 's'; 
            
            document.getElementById('latency-display').textContent = latencyDisplay;
            
            // Update local time for context
            const options = { timeZone: 'Africa/Johannesburg', hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' };
            document.getElementById('local-time').textContent = new Date().toLocaleTimeString('en-ZA', options);
        }

        updateNodeMetrics();
        setInterval(updateNodeMetrics, 50); 
    </script>
</body>
</html>
